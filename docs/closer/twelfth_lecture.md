---
title: "Лекция 12: Указатели и массивы в языке C"
---

> "Настоящие шаманы проживают в провинции Шамань, а всё остальное - это игривые колдуны."

***

## **Различие между указателями и массивами**

В языке C массивы и указатели — это два важнейших понятия, которые тесно связаны, но они не одно и то же. Понимание их различий — ключ к успешному программированию на C.

### **Массивы**

Массив в C — это структура данных, которая позволяет хранить несколько элементов одного типа данных в последовательной области памяти. Когда мы создаем массив, мы заранее задаем его размер.

**Объявление массива:**

```c
int arr[5];  // объявление массива из 5 элементов типа int
```

В этом примере мы создаем массив, который может хранить 5 целых чисел. Важное замечание: размер массива задается на этапе компиляции, и его нельзя изменить в процессе работы программы.

### **Указатели**

Указатель — это переменная, которая хранит адрес другой переменной в памяти. Указатели позволяют работать с данными, которые находятся в разных местах памяти, и позволяют изменять эти данные, передавая их по ссылке.

**Объявление указателя:**

```c
int *ptr;  // указатель на целое число
```

Здесь `ptr` — это указатель на целое число. Указатель не хранит само значение, а только адрес переменной, которая его хранит.

### **Ключевое различие между указателями и массивами**

* **Массив** — это область памяти, в которой хранится несколько элементов одного типа. Он имеет фиксированный размер, который задается при объявлении, и все элементы массива размещаются в памяти последовательно.
* **Указатель** — это переменная, которая хранит **адрес** другой переменной. Указатели могут быть перенаправлены на разные области памяти, а массив же не может быть изменен после его создания.

**Пример:**

```c
int arr[5] = {1, 2, 3, 4, 5};  // массив из 5 целых чисел
int *ptr = arr;  // указатель на первый элемент массива

// Доступ к элементам через массив
printf("%d\n", arr[0]);  // выводит 1

// Доступ к элементам через указатель
printf("%d\n", *ptr);  // выводит 1
```

Здесь `arr` — это массив, а `ptr` — указатель на его первый элемент. Важно, что когда мы используем имя массива `arr` в выражении, оно автоматически преобразуется в указатель на первый элемент этого массива.

***

## **Массив указателей**

Теперь давайте рассмотрим концепт **массива указателей**. Массив указателей — это массив, в котором каждый элемент является указателем на какой-то объект.

**Пример:**

```c
char *arr[3] = {"Hello", "World", "C Programming"};

printf("%s\n", arr[0]);  // выводит "Hello"
printf("%s\n", arr[1]);  // выводит "World"
printf("%s\n", arr[2]);  // выводит "C Programming"
```

Здесь:

* `arr` — это массив, состоящий из 3 указателей на строки.
* Каждый элемент массива `arr` — это указатель на строку, а строка в C — это указатель на первый символ массива символов, завершенный нулевым символом `'\0'`.

**Ключевое различие:**

* В обычном массиве все элементы имеют одинаковый тип, и они занимают подряд расположенные ячейки памяти.
* В массиве указателей каждый элемент может указывать на разные данные, которые могут находиться в разных местах памяти.

***

## **Строки в C**

В C строки представляют собой массивы символов, завершающиеся нулевым символом (`'\0'`). Но строки также могут быть представлены как указатели на первый элемент массива символов. Важно понимать, что строка в C — это не просто массив символов, а именно массив символов с нулевым терминатором.

### **Массивы символов**

```c
char str[] = "Hello";  // массив символов
```

В этом примере строка `"Hello"` фактически является массивом символов:

```
str[0] = 'H'
str[1] = 'e'
str[2] = 'l'
str[3] = 'l'
str[4] = 'o'
str[5] = '\0'  // нулевой символ, который завершает строку
```

Здесь массив `str` состоит из 6 символов, включая завершающий нулевой символ.

### **Указатели на строки**

Строку можно также представить как указатель на первый символ:

```c
char *ptr = "Hello";  // указатель на строку
```

В этом случае `ptr` является указателем на строку `"Hello"`. Вы можете работать с этой строкой точно так же, как и с массивом, используя указатель.

**Пример:**

```c
char str[] = "Hello";
char *ptr = "Hello";

// Доступ через массив
printf("%c\n", str[0]);  // выводит 'H'

// Доступ через указатель
printf("%c\n", *ptr);  // выводит 'H'
```

Обе строки — и массив символов, и указатель на строку — ссылаются на одинаковые данные в памяти. Однако разница в том, что при использовании массива создается копия строки в памяти, а при использовании указателя строка остаётся в исходном виде.

***

## **Примеры обработки массивов и указателей**

### **Обработка массива через указатель**

Когда мы передаем массив в функцию, на самом деле передается указатель на его первый элемент. Это важно, так как позволяет работать с массивом в функции без необходимости передавать всю его копию.

```c
#include <stdio.h>

void printArray(int *arr, int size) {
    for (int i = 0; i < size; i++) {
        printf("%d ", *(arr + i));  // доступ к элементам массива через указатель
    }
    printf("\n");
}

int main() {
    int arr[5] = {10, 20, 30, 40, 50};
    printArray(arr, 5);  // передаем массив
    return 0;
}
```

Здесь функция `printArray` принимает указатель на первый элемент массива и размер массива, а затем выводит все элементы массива.

### **Работа с указателями и массивами в цикле**

С помощью указателей мы можем пройти по всем элементам массива в цикле.

```c
#include <stdio.h>

int main() {
    int arr[5] = {1, 2, 3, 4, 5};
    int *ptr = arr;  // указатель на первый элемент массива

    for (int i = 0; i < 5; i++) {
        printf("arr[%d] = %d\n", i, *(ptr + i));  // доступ через указатель
    }

    return 0;
}
```

Здесь `*(ptr + i)` позволяет получить доступ к элементам массива, используя арифметику указателей.

### **Массив указателей на функции**

Массив указателей может быть использован для хранения указателей на функции. Это позволяет динамически вызывать различные функции, храня их в массиве.

```c
#include <stdio.h>

void func1() { printf("Function 1\n"); }
void func2() { printf("Function 2\n"); }

int main() {
    void (*funcArr[2])();  // массив указателей на функции
    funcArr[0] = func1;
    funcArr[1] = func2;

    funcArr[0]();  // вызов func1
    funcArr[1]();  // вызов func2

    return 0;
}
```

Здесь `funcArr` — это массив указателей на функции. Мы можем вызвать функции через их указатели, хранящиеся в массиве.

***

## Заключение

1. **Массивы** в C — это последовательности элементов одного типа, которые занимают последовательную область памяти.
2. **Указатели** — это переменные, хранящие адреса других переменных, и они позволяют работать с данными по ссылке.
3. **Массив указателей** — это массив, в котором каждый элемент является указателем на какой-либо объект, например, на строку.
4. **Строки** в C — это массивы символов с завершающим нулевым символом. Строку можно представлять как указатель на первый символ этого массива.
5. **Передача массивов в функции** происходит через указатель на первый элемент массива, что позволяет работать с массивами без их копирования.

***

> [Sex ist ein Schlacht <br />
> Liebe ist Krieg](https://youtu.be/70tvVuj4v5g)
