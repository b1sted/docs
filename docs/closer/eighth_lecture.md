---
title: "Лекция 8: Функции"
---

> _"Чтобы что-то шло тебе в руки, нужно эти руки протянуть. Иначе протянешь ноги." - Стив Бушеми_

<hr class="custom-divider">

## Что такое функция?

**Функция** в языке C – это именованная последовательность операторов, которая может принимать параметры и возвращать значение. Использование функций позволяет:

* Выделить дублирующийся код в отдельные блоки;
* Логически разделить программу на части;
* Упрощать управление и тестирование.

Пример простой функции, возвращающей сумму двух чисел:

```c
#include <stdio.h>  // Подключаем библиотеку для ввода-вывода

// Функция для вычисления суммы двух целых чисел
int sum(int a, int b) {
    return a + b;  // Возвращаем сумму
}

int main() {
    // Вызываем функцию sum с аргументами 3 и 4 и сохраняем результат
    int result = sum(3, 4); 
    
    // Выводим результат на экран
    printf("Сумма: %d\n", result); 
    
    return 0;  // Завершаем программу успешно
}
```

<hr class="custom-divider">

## Структура функции в C

Функция состоит из:

* **Заголовка**, который определяет тип возвращаемого значения, имя функции и параметры:
* **Тела функции** — последовательность операторов:

```c
// Заголовок функции:
// Определяет, что функция add возвращает целое число (int),
// имя функции - add, и она принимает два параметра: два целых числа (int a и int b).
int add(int a, int b) {
    return a + b; // Тело функции: выполняем сложение двух переданных аргументов и возвращаем результат.
}
```

<hr class="custom-divider">

## Передача параметров в функцию

При вызове функции параметры передаются **по значению** – функция работает с копиями переменных.

Пример:

```c
#include <stdio.h>  // Подключаем стандартную библиотеку для ввода-вывода

// Функция для изменения значения переменной
void changeValue(int x) {
    x = 100;  // Изменяется только копия переменной x, оригинал не затрагивается
}

int main() {
    int a = 5;  // Инициализируем переменную a со значением 5
    changeValue(a);  // Вызываем функцию changeValue с a в качестве аргумента

    // Выводим значение переменной a
    printf("Значение a: %d\n", a);  // Ожидаемый вывод: 5 (значение a не изменилось)

    return 0;  // Завершаем программу успешно
}
```

Чтобы изменить оригинальную переменную, передают **указатель**:

```c
#include <stdio.h>  // Подключаем стандартную библиотеку для ввода-вывода

// Функция для изменения значения переменной через указатель
void changeValue(int *x) {
    *x = 100;  // Изменяем значение по адресу, на который указывает указатель x
}

int main() {
    int a = 5;  // Инициализируем переменную a со значением 5
    changeValue(&a);  // Передаем адрес переменной a в функцию changeValue

    // Выводим новое значение переменной a
    printf("Значение a: %d\n", a);  // Ожидаемый вывод: 100 (значение a изменилось)

    return 0;  // Завершаем программу успешно
}

```

<hr class="custom-divider">

## Передача массивов и указателей

Для передачи массива в функцию достаточно передать его имя, которое интерпретируется как указатель на первый элемент:

```c
#include <stdio.h>  // Подключаем стандартную библиотеку для ввода-вывода

// Функция для вывода элементов массива
void printArray(int arr[], int size) {
    // Проходим по всем элементам массива и выводим их
    for (int i = 0; i < size; i++) {
        printf("%d ", arr[i]);  // Выводим текущий элемент массива
    }
    printf("\n");  // Печатаем новую строку после вывода всех элементов
}

int main() {
    // Инициализируем массив данных
    int data[] = {1, 2, 3, 4}; 

    // Вызываем функцию printArray для вывода элементов массива
    printArray(data, sizeof(data) / sizeof(data[0]));  // Передаем массив и его размер

    return 0;  // Завершаем программу успешно
}
```

<hr class="custom-divider">

## Функции с переменным числом параметров

Функции с переменным числом параметров, например `printf`, позволяют обрабатывать неопределённое количество аргументов. Для их реализации используется библиотека `<stdarg.h>`:

```c
#include <stdarg.h>  // Подключаем библиотеку для работы с переменным количеством аргументов
#include <stdio.h>   // Подключаем стандартную библиотеку для ввода-вывода

// Функция для вычисления суммы переменного количества аргументов
int sum(int count, ...) {
    va_list args;          // Объявляем переменную для хранения аргументов
    va_start(args, count); // Инициализируем va_list для сбора аргументов

    int total = 0;        // Переменная для хранения суммы
    // Проходим по всем переданным аргументам
    for (int i = 0; i < count; i++) {
        total += va_arg(args, int); // Получаем следующий аргумент и добавляем его к сумме
    }

    va_end(args); // Завершаем работу с va_list
    return total; // Возвращаем итоговую сумму
}

int main() {
    // Вызываем функцию sum с четырьмя аргументами и выводим результат
    printf("Сумма: %d\n", sum(4, 1, 2, 3, 4)); // Ожидаемый вывод: Сумма: 10
    return 0;  // Завершаем программу успешно
}
```

<hr class="custom-divider">

## Рекурсия

Рекурсивные функции вызывают сами себя, что полезно для решения задач, разложенных на одинаковые подзадачи.

Пример вычисления факториала:

```c
#include <stdio.h>  // Подключаем стандартную библиотеку для ввода-вывода

// Функция для вычисления факториала числа n
int factorial(int n) {
    if (n <= 1) return 1; // Базовый случай: факториал 0 и 1 равен 1
    return n * factorial(n - 1); // Рекурсивный случай: n! = n * (n-1)!
}

int main() {
    // Вызываем функцию factorial для вычисления факториала числа 5 и выводим результат
    printf("Факториал 5: %d\n", factorial(5));  // Ожидаемый вывод: 120
    return 0;  // Завершаем программу успешно
}
```

<hr class="custom-divider">

## Встраиваемые функции

В C можно использовать **встраиваемые функции** с ключевым словом `inline` для оптимизации кода.

Пример:

```c
#include <stdio.h>  // Подключаем библиотеку для ввода-вывода

// Функция для вычисления квадрата числа
inline int square(int x) {
    return x * x;  // Возвращаем квадрат переданного числа
}

int main() {
    // Вызываем функцию square для вычисления квадрата числа 5 и выводим результат
    printf("Квадрат числа 5: %d\n", square(5)); // Ожидаемый вывод: 25
    
    return 0;  // Завершаем программу успешно
}
```

<hr class="custom-divider">

## Параметры командной строки

Функция `main` может принимать параметры командной строки для работы с внешними аргументами.

Пример программы, которая складывает два числа, переданных через командную строку:

```c
#include <stdio.h>   // Подключаем библиотеку для ввода-вывода
#include <stdlib.h>  // Подключаем библиотеку для работы с преобразованием строк

int main(int argc, char *argv[]) {
    // Проверяем, передано ли два аргумента
    if (argc != 3) {
        printf("Ошибка: нужно два числа\n"); // Выводим сообщение об ошибке
        return 1; // Завершаем программу с кодом ошибки
    }

    // Преобразуем строковые аргументы в целые числа
    int a = atoi(argv[1]); // Первое число
    int b = atoi(argv[2]); // Второе число

    // Выводим сумму двух чисел
    printf("Сумма: %d\n", a + b);

    return 0; // Завершаем программу успешно
}
```

<hr class="custom-divider">

> [_облегчение_](https://www.youtube.com/watch?v=ulj5UJ5GHvE\&pp=ygUZYWxiZXJ0byBiYWxzYW0gYXBoZXggdHdpbg%3D%3D)
